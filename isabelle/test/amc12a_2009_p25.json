{
    "problem_name": "amc12a_2009_p25",
    "formal_statement": "theorem amc12a_2009_p25:\n  fixes a :: \"nat \\<Rightarrow> real\"\n  assumes h0 : \"a 1 = 1\"\n    and h1 : \"a 2 = 1 / (sqrt 3)\"\n    and h2 : \"\\<And>n. a (n+2) = (a n + a (n+1)) / (1 - (a n) * (a (n+1)))\"\n  shows \"abs (a 2009) = 0\"",
    "informal_statement": "The first two terms of a sequence are $a_1 = 1$ and $a_2 = \\frac {1}{\\sqrt3}$. For $n\\ge1$,\n\n<center>$a_{n + 2} = \\frac {a_n + a_{n + 1}}{1 - a_na_{n + 1}}.$</center>\n\nWhat is $|a_{2009}|$?\n\n$\\textbf{(A)}\\ 0\\qquad \\textbf{(B)}\\ 2 - \\sqrt3\\qquad \\textbf{(C)}\\ \\frac {1}{\\sqrt3}\\qquad \\textbf{(D)}\\ 1\\qquad \\textbf{(E)}\\ 2 + \\sqrt3$ Show that it is \\textbf{(A)}\\ 0.",
    "informal_proof": "Consider another sequence $\\{\\theta_1, \\theta_2, \\theta_3...\\}$ such that $a_n = \\tan{\\theta_n}$, and $0 \\leq \\theta_n < 180$.\n\nThe given recurrence becomes\n\n<center>$\\begin{align*} a_{n + 2} & = \\frac {a_n + a_{n + 1}}{1 - a_na_{n + 1}} \\\\\n\\tan{\\theta_{n + 2}} & = \\frac {\\tan{\\theta_n} + \\tan{\\theta_{n + 1}}}{1 - \\tan{\\theta_n}\\tan{\\theta_{n + 1}}} \\\\\n\\tan{\\theta_{n + 2}} & = \\tan(\\theta_{n + 1} + \\theta_n) \\end{align*}$</center>\n\nIt follows that $\\theta_{n + 2} \\equiv \\theta_{n + 1} + \\theta_{n} \\pmod{180}$. Since $\\theta_1 = 45, \\theta_2 = 30$, all terms in the sequence $\\{\\theta_1, \\theta_2, \\theta_3...\\}$ will be a multiple of $15$.\n\nNow consider another sequence $\\{b_1, b_2, b_3...\\}$ such that $b_n = \\theta_n/15$, and $0 \\leq b_n < 12$. The sequence $b_n$ satisfies $b_1 = 3, b_2 = 2, b_{n + 2} \\equiv b_{n + 1} + b_n \\pmod{12}$.\n\nAs the number of possible consecutive two terms is finite, we know that the sequence $b_n$ is periodic. Write out the first few terms of the sequence until it starts to repeat.\n\n$\\{b_n\\} = \\{3,2,5,7,0,7,7,2,9,11,8,7,3,10,1,11,0,11,11,10,9,7,4,11,3,2,5,7,...\\}$\n\nNote that $b_{25} = b_1 = 3$ and $b_{26} = b_2 = 2$. Thus $\\{b_n\\}$ has a period of $24$: $b_{n + 24} = b_n$.\n\nIt follows that $b_{2009} = b_{17} = 0$ and $\\theta_{2009} = 15 b_{2009} = 0$. Thus $a_{2009} = \\tan{\\theta_{2009}} = \\tan{0} = 0.$\n\nOur answer is $|a_{2009}| = \\textbf{(A)}\\ 0$.",
    "python_proof": [
        "\n\n        from sympy import *\n        x, y, z = symbols('x y z')\n        a1, a2 = 1, 1/sqrt(3)\n        a = [a1, a2]\n        for n in range(2, 2009):\n            a.append((a[n - 1] + a[n])/(1 - a[n - 1]*a[n]))\n        print(abs(a[2008]))\n\n        Isabelle Proof:\n\n        From the Python snippet, we have\n\n        <code>\n        from sympy import *\n        x, y, z = symbols('x y z')\n        a1, a2 = 1, 1/sqrt(3)\n        a = [a1, a2]\n        for n in range(2, 2009):\n            a.append((a[n - 1] + a[n])/(1 - a[n - 1]*a[n]))\n        print(abs(a[2008]))\n        </code>\n\n        which gives\n\n        <code>\n        0.000000000000000\n        </code>\n\n        Thus, the answer is $\\textbf{(A)}\\ 0$.\n\n        The formal proof is as follows:\n\n        <code>\n        from sympy import *\n        x, y, z = symbols('x y z')\n        a1, a2 = 1, 1/sqrt(3)\n        a = [a1, a2]\n        for n in range(2, 2009):\n            a.append((a[n - 1] + a[n])/(1 - a[n - 1]*a[n]))\n        print(abs(a[2008]))\n        </code>\n\n        which gives\n\n        <code>\n        0.000000000000000\n        </code>\n\n        Thus, the answer is $\\textbf{(A)}\\ 0$.\n\n        The formal proof is as follows:\n\n        <code>\n        from sympy import *\n        x, y, z = symbols('x y z')\n        a1, a2 = 1, 1/sqrt(3)\n        a = [a1, a2]\n        for n in range(2, 2009):\n            a.append((a[n - 1] + a[n])/(1 - a[n - 1]*a[n]))\n        print(abs(a[2008]))\n        </code>\n\n        which gives\n\n        <code>\n        0.000000000000000\n        </code>\n\n        Thus, the answer is $\\textbf{(A)}\\ 0$.\n\n        The formal proof is as follows:\n\n        <code>\n        from sympy import *\n        x, y, z = symbols('x y z')\n        a1, a2 = 1, 1/sqrt(3)\n        a = [a1, a2]\n        for n in range(2, 2009):\n            a.append((a[n - 1] + a[n])/(1 - a[n - 1]*a[n]))\n        print(abs(a[2008]))\n        </code>\n\n        which gives\n\n        <code>\n        0.000000000000000\n        </code>\n\n        Thus, the answer is $\\textbf{(A)}\\ 0$.\n\n        The formal proof is as follows:\n\n        <code>\n        from sympy import *\n        x, y, z = symbols('x y z')\n        a1, a2 = 1, 1/sqrt(3)\n        a = [a1, a2]\n        for n in range(2, 2009):\n            a.append((a[n - 1] + a[n])/(1 - a[n - 1]*a[n]))\n        print(abs(a[2008]))\n        </code>\n\n        which gives\n\n        <code>\n        0.000000000000000\n        </code>\n\n        Thus, the answer is $\\textbf{(A"
    ],
    "header": "(*\n  Authors: Albert Qiaochu Jiang\n*)\n\ntheory amc12a_2009_p25 imports\nComplex_Main\n\nbegin\n\n"
}